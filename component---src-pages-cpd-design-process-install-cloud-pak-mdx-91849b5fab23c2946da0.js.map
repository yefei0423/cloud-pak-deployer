{"version":3,"sources":["webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/LastModifiedDate.js","webpack:///./node_modules/gatsby-theme-carbon/src/templates/Default.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/last-modified-date.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.module.scss","webpack:///./src/pages/cpd-design/process/install-cloud-pak.mdx"],"names":["PageHeader","title","theme","tabs","className","cx","styles","pageHeader","withTabs","length","darkMode","id","text","EditLink","relativePagePath","repositoryProp","repository","useStaticQuery","site","siteMetadata","baseUrl","subDirectory","href","branch","row","link","PageTabs","render","this","props","slug","currentTab","split","filter","Boolean","slice","pageTabs","map","tab","slugifiedTab","slugify","lower","strict","selected","currentTabRegex","RegExp","replace","key","selectedItem","listItem","to","tabsContainer","aria-label","list","React","Component","LastModifiedDate","date","lastModified","Date","toLocaleDateString","day","year","month","Default","pageContext","children","location","Title","frontmatter","titleType","frontmatterTheme","description","keywords","interiorTheme","useMetadata","pathPrefix","pathname","Layout","homepage","pageTitle","pageDescription","pageKeywords","label","Main","padded","NextPrevious","Utils","module","exports","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-cpd-design-process-install-cloud-pak-mdx-91849b5fab23c2946da0.js","sourcesContent":["import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport styles from './PageHeader.module.scss';\n\nconst PageHeader = ({ title, theme, tabs = [] }) => (\n  <div\n    className={cx(styles.pageHeader, {\n      [styles.withTabs]: tabs.length,\n      [styles.darkMode]: theme === 'dark',\n    })}>\n    <div className=\"bx--grid\">\n      <div className=\"bx--row\">\n        <div className=\"bx--col-lg-12\">\n          <h1 id=\"page-title\" className={styles.text}>\n            {title}\n          </h1>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nPageHeader.propTypes = {\n  /**\n   * Specify the title for the page\n   */\n  title: PropTypes.node,\n};\n\nexport default PageHeader;\n","import EditLink from './EditLink';\n\nexport default EditLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nimport { link, row } from './EditLink.module.scss';\n\nconst EditLink = ({ relativePagePath, repository: repositoryProp }) => {\n  const {\n    site: {\n      siteMetadata: { repository },\n    },\n  } = useStaticQuery(graphql`\n    query REPOSITORY_QUERY {\n      site {\n        siteMetadata {\n          repository {\n            baseUrl\n            subDirectory\n            branch\n          }\n        }\n      }\n    }\n  `);\n\n  const { baseUrl, subDirectory, branch } = repositoryProp || repository;\n\n  const href = `${baseUrl}/edit/${branch}${subDirectory}/src/pages${relativePagePath}`;\n\n  return baseUrl ? (\n    <div className={`bx--row ${row}`}>\n      <div className=\"bx--col\">\n        <a className={link} href={href}>\n          Edit this page on GitHub\n        </a>\n      </div>\n    </div>\n  ) : null;\n};\n\nEditLink.propTypes = {\n  repository: PropTypes.shape({\n    baseUrl: PropTypes.string,\n    subDirectory: PropTypes.string,\n    branch: PropTypes.string,\n  }),\n  relativePagePath: PropTypes.string,\n};\n\nexport default EditLink;\n","import PageTabs from './PageTabs';\n\nexport default PageTabs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'gatsby';\nimport slugify from 'slugify';\nimport cx from 'classnames';\n\nimport {\n  tabsContainer,\n  list,\n  selectedItem,\n  listItem,\n  link,\n} from './PageTabs.module.scss';\n\nexport default class PageTabs extends React.Component {\n  render() {\n    const { title, tabs, slug } = this.props;\n    const currentTab = slug.split('/').filter(Boolean).slice(-1)[0];\n\n    const pageTabs = tabs.map((tab) => {\n      const slugifiedTab = slugify(tab, { lower: true, strict: true });\n      const selected = slugifiedTab === currentTab;\n      // matches with or without trailing slash: /?\n      // matches with or without hash link: (#.*)?\n      const currentTabRegex = new RegExp(`${currentTab}/?(#.*)?$`);\n      const href = slug.replace(currentTabRegex, slugifiedTab);\n      return (\n        <li key={tab} className={cx({ [selectedItem]: selected }, listItem)}>\n          <Link className={link} to={`${href}`}>\n            {tab}\n          </Link>\n        </li>\n      );\n    });\n\n    return (\n      <div className={tabsContainer}>\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--col-lg-12 bx--col-no-gutter\">\n              <nav aria-label={title}>\n                <ul className={list}>{pageTabs}</ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nPageTabs.propTypes = {\n  tabs: PropTypes.array,\n  slug: PropTypes.string,\n};\n","import LastModifiedDate from './LastModifiedDate';\n\nexport default LastModifiedDate;\n","import React from 'react';\nimport { Row, Column } from '../Grid';\nimport styles from './last-modified-date.module.scss';\n\nconst LastModifiedDate = ({ date }) => {\n  const options = {\n    day: '2-digit',\n    year: 'numeric',\n    month: 'long',\n  };\n\n  const lastModified = new Date(date);\n\n  return date ? (\n    <Row className={styles.row}>\n      <Column>\n        <div className={styles.text}>\n          Page last updated: {lastModified.toLocaleDateString('en-GB', options)}\n          {/* // https://www-03preprod.ibm.com/support/knowledgecenter/ibm_style/dates-and-times.html */}\n        </div>\n      </Column>\n    </Row>\n  ) : null;\n};\nexport default LastModifiedDate;\n","import React from 'react';\nimport slugify from 'slugify';\nimport { useStaticQuery, graphql } from 'gatsby';\n\nimport Utils from '../components/Utils';\nimport Layout from '../components/Layout';\nimport PageHeader from '../components/PageHeader';\nimport EditLink from '../components/EditLink';\nimport NextPrevious from '../components/NextPrevious';\nimport PageTabs from '../components/PageTabs';\nimport Main from '../components/Main';\nimport useMetadata from '../util/hooks/useMetadata';\nimport LastModifiedDate from '../components/LastModifiedDate';\n\nconst Default = ({ pageContext, children, location, Title }) => {\n  const { frontmatter = {}, relativePagePath, titleType } = pageContext;\n  const {\n    tabs,\n    title,\n    theme: frontmatterTheme,\n    description,\n    keywords,\n    date,\n  } = frontmatter;\n\n  const { interiorTheme } = useMetadata();\n\n  // get the path prefix if it exists\n  const {\n    site: { pathPrefix },\n  } = useStaticQuery(graphql`\n    query PATH_PREFIX_QUERY {\n      site {\n        pathPrefix\n      }\n    }\n  `);\n\n  // let gatsby handle prefixing\n  const slug = pathPrefix\n    ? location.pathname.replace(pathPrefix, '')\n    : location.pathname;\n\n  const getCurrentTab = () => {\n    if (!tabs) return '';\n    return (\n      slug.split('/').filter(Boolean).slice(-1)[0] ||\n      slugify(tabs[0], { lower: true })\n    );\n  };\n\n  const currentTab = getCurrentTab();\n\n  const theme = frontmatterTheme || interiorTheme;\n\n  return (\n    <Layout\n      tabs={tabs}\n      homepage={false}\n      theme={theme}\n      pageTitle={title}\n      pageDescription={description}\n      pageKeywords={keywords}\n      titleType={titleType}>\n      <PageHeader\n        title={Title ? <Title /> : title}\n        label=\"label\"\n        tabs={tabs}\n        theme={theme}\n      />\n      {tabs && (\n        <PageTabs\n          title={title}\n          slug={slug}\n          tabs={tabs}\n          currentTab={currentTab}\n        />\n      )}\n      <Main padded>\n        {children}\n        <EditLink relativePagePath={relativePagePath} />\n        <LastModifiedDate date={date} />\n      </Main>\n      <NextPrevious\n        pageContext={pageContext}\n        location={location}\n        slug={slug}\n        tabs={tabs}\n        currentTab={currentTab}\n      />\n      <Utils />\n    </Layout>\n  );\n};\n\nexport default Default;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"EditLink-module--bx--text-truncate--end--2pqje\",\"bxTextTruncateFront\":\"EditLink-module--bx--text-truncate--front--3_lIE\",\"link\":\"EditLink-module--link--1qzW3\",\"row\":\"EditLink-module--row--1B9Gk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageTabs-module--bx--text-truncate--end--267NA\",\"bxTextTruncateFront\":\"PageTabs-module--bx--text-truncate--front--3xEQF\",\"tabsContainer\":\"PageTabs-module--tabs-container--8N4k0\",\"list\":\"PageTabs-module--list--3eFQc\",\"listItem\":\"PageTabs-module--list-item--nUmtD\",\"link\":\"PageTabs-module--link--1mDJ1\",\"selectedItem\":\"PageTabs-module--selected-item--YPVr3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"last-modified-date-module--bx--text-truncate--end--123zi\",\"bxTextTruncateFront\":\"last-modified-date-module--bx--text-truncate--front--3xeKz\",\"text\":\"last-modified-date-module--text--24m-4\",\"row\":\"last-modified-date-module--row--2BquN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageHeader-module--bx--text-truncate--end--mZWeX\",\"bxTextTruncateFront\":\"PageHeader-module--bx--text-truncate--front--3zvrI\",\"pageHeader\":\"PageHeader-module--page-header--3hIan\",\"darkMode\":\"PageHeader-module--dark-mode--hBrwL\",\"withTabs\":\"PageHeader-module--with-tabs--3nKxA\",\"text\":\"PageHeader-module--text--o9LFq\"};","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/cloud-pak-deployer/cloud-pak-deployer/doc/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{`Install the Cloud Pak(s)`}</h1>\n    <p>{`This stage focuses on preparing the OpenShift cluster for installing the Cloud Pak(s) and then proceeds with the installation of Cloud Paks and the cartridges. The below documentation will start with a list of steps that will be executed for all Cloud Paks, then proceed with Cloud Pak specific activities. The execution of the steps may slightly differ from the sequence in the documentation.`}</p>\n    <p>{`Sections:`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#remove-cloud-pak-for-data\"\n        }}>{`Remove obsolete Cloud Pak for Data instances`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#prepare-private-image-registry\"\n        }}>{`Prepare private image registry`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#install-cloud-pak-for-data-and-cartridges\"\n        }}>{`Install Cloud Pak for Data and cartridges`}</a></li>\n    </ul>\n    <h2>{`Remove Cloud Pak for Data`}</h2>\n    <p>{`Before going ahead with the mirroring of container images and installation of Cloud Pak for Data, the previous configuration (if any) is retrieved from the vault to determine if a Cloud Pak for Data instance has been removed. If a previously installed `}<inlineCode parentName=\"p\">{`cp4d`}</inlineCode>{` object no longer exists in the current configuration, its associated instance is removed from the OpenShift cluster.`}</p>\n    <p>{`First, the custom resources are removed from the OpenShift project. This happens with a grace period of 5 minutes. After the grace period has expired, OpenShift automatically forcefully deletes the custom resource and its associated definitions. Then, the control plane custom resource `}<inlineCode parentName=\"p\">{`Ibmcpd`}</inlineCode>{` is removed and finally the namespace (project). For the namespace deletion, a grace period of 10 minutes is applied.`}</p>\n    <h2>{`Prepare private image registry`}</h2>\n    <p>{`When installing the Cloud Paks, images must be pulled from an image registry. All Cloud Paks support pulling images directly from the IBM Entitled Registry using the entitlement key, but there may be situations this is not possible, for example in air-gapped environents, or when images must be scanned for vulnerabilities before they are allowed to be used. In those cases, a private registry will have to be set up.`}</p>\n    <p>{`The Cloud Pak Deployer can mirror images to a private registry from the entitled registry. On IBM Cloud, the deployer is also capable of creating a namespace in the IBM Container Registry and mirror the images to that namespace.`}</p>\n    <p>{`When a private registry has been specified in the Cloud Pak entry (using the `}<inlineCode parentName=\"p\">{`image_registry_name`}</inlineCode>{` property), the necessary OpenShift configuration changes will also be made.`}</p>\n    <h3>{`Create IBM Container Registry namespace (IBM Cloud only)`}</h3>\n    <p>{`If OpenShift is deployed on IBM Cloud (ROKS), the IBM Container Registry should be used as the private registry from which the images will be pulled. Images in the ICR are organized by namespace and can be accessed using an API key issued for a service account. If an `}<inlineCode parentName=\"p\">{`image_registry`}</inlineCode>{` object is specified in the configuration, this process will take care of creating the service account, then the API key and it will store the API key in the vault.`}</p>\n    <h3>{`Connect to the specified private image registry`}</h3>\n    <p>{`If an image registry has been specified for the Cloud Pak using the `}<inlineCode parentName=\"p\">{`image_registry_name`}</inlineCode>{` property, the referenced `}<inlineCode parentName=\"p\">{`image_registry`}</inlineCode>{` entry is looked up in the configuration and the credentials are retrieved from the vault. Then the connection to the registry is tested by logging on.`}</p>\n    <h2>{`Install Cloud Pak for Data and cartridges`}</h2>\n    <h3>{`Prepare OpenShift cluster for Cloud Pak for Data installation`}</h3>\n    <p>{`Cloud Pak for Data requires a number of cluster-wide settings:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Create an `}<inlineCode parentName=\"li\">{`ImageContentSourcePolicy`}</inlineCode>{` if images must be pulled from a private registry`}</li>\n      <li parentName=\"ul\">{`Set the global pull secret with the credentials to pull images from the entitled or private image registry`}</li>\n      <li parentName=\"ul\">{`Create a `}<inlineCode parentName=\"li\">{`Tuned`}</inlineCode>{` object to set kernel semaphores and other properties of CoreOS containers being spun up`}</li>\n      <li parentName=\"ul\">{`Allow unsafe system controls in the Kubelet configuration`}</li>\n      <li parentName=\"ul\">{`Set PIDs limit and default ulimit for the CRI-O configuration`}</li>\n    </ul>\n    <p>{`For all OpenShift clusters, except ROKS on IBM Cloud, these settings are applied using OpenShift configuration objects and then picked up by the Machine Config Operator. This operator will then apply the settings to the control plane and compute nodes as appropriate and reload them one by one.`}</p>\n    <p>{`To avoid having to reload the nodes more than once, the Machine Config Operator is paused before the settings are applied. After all setup, the Machine Config Operator is released and the deployment process will then wait until all nodes are ready with the configuration applied.`}</p>\n    <h4>{`Prepare OpenShift cluster on IBM Cloud`}</h4>\n    <p>{`As mentioned before, ROKS on IBM Cloud does not include the Machine Config Operator and would normally require the compute nodes to be reloaded (classic ROKS) or replaced (ROKS on VPC) to make the changes effective. While implementing this process, we have experienced intermittent reliability issues where replacement of nodes never finished or the cluster ended up in a unusable state. To avoid this, the process is applying the settings in a different manner.`}</p>\n    <p>{`On every node, a cron job is created which starts every 5 minutes. It runs a script that checks if any of the cluster-wide settings must be (re-)applied, then updates the local system and restarts the `}<inlineCode parentName=\"p\">{`crio`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`kubelet`}</inlineCode>{` daemons. If no settings are to be adjusted, the daemons will not be restarted and therefore the cron job has minimal or no effect on the running applications.`}</p>\n    <p>{`Compute node changes that are made by the cron job:\n`}<strong parentName=\"p\">{`ImageContentSourcePolicy`}</strong>{`: File `}<inlineCode parentName=\"p\">{`/etc/containers/registries.conf`}</inlineCode>{` is updated to include registry mirrors for the private registry.\n`}<strong parentName=\"p\">{`Kubelet`}</strong>{`: File `}<inlineCode parentName=\"p\">{`/etc/kubernetes/kubelet.conf`}</inlineCode>{` is appended with the `}<inlineCode parentName=\"p\">{`allowedUnsafeSysctls`}</inlineCode>{` entries.\n`}<strong parentName=\"p\">{`CRI-O`}</strong>{`: `}<inlineCode parentName=\"p\">{`pids_limit`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`default_ulimit`}</inlineCode>{` changes are made to the `}<inlineCode parentName=\"p\">{`/etc/crio/crio.conf`}</inlineCode>{` file.\n`}<strong parentName=\"p\">{`Pull secret`}</strong>{`: The registry and credentials are appended to the `}<inlineCode parentName=\"p\">{`/.docker/config.json`}</inlineCode>{` configuration.`}</p>\n    <h3>{`Mirror images to the private registry`}</h3>\n    <p>{`If a private image registry is specified, and if the IBM Cloud Pak entitlement key is available in the vault (`}<inlineCode parentName=\"p\">{`cp_entitlement_key`}</inlineCode>{` secret), the Cloud Pak case files for the Foundational Services, the Cloud Pak control plane and cartridges are downloaded to a subdirectory of the status directory that was specified. Then all images defined for the cartridges are mirrored from the entitled registry to the private image registry. Dependent on network speed and how many cartridges have been configured, the mirroring can take a very long time (12+ hours). All images which have already been mirrored to the private registry are skipped by the mirroring process.`}</p>\n    <p>{`Even if all images have been mirrored, the act of checking existence and digest can still take a bit of time (10-15 minutes). To avoid this, you can remove the `}<inlineCode parentName=\"p\">{`cp_entitlement_key`}</inlineCode>{` secret from the vault and unset the `}<inlineCode parentName=\"p\">{`CP_ENTITLEMENT_KEY`}</inlineCode>{` environment variable before running the Cloud Pak Deployer.`}</p>\n    <h3>{`Create catalog sources`}</h3>\n    <p>{`The images of the operators which control the Cloud Pak are defined in OpenShift `}<inlineCode parentName=\"p\">{`CatalogSource`}</inlineCode>{` objects which reside in the `}<inlineCode parentName=\"p\">{`openshift-marketplace`}</inlineCode>{` project. Operator subscriptions subsequently reference the catalog source and define the update channel. When images are pulled from the entitled registry, most subscriptions reference the same `}<inlineCode parentName=\"p\">{`ibm-operator-catalog`}</inlineCode>{` catalog source (and also a Db2U catalog source). If images are pulled from a private registry, the control plane and also each cartridge reference their own catalog source in the `}<inlineCode parentName=\"p\">{`openshift-marketplace`}</inlineCode>{` project.`}</p>\n    <p>{`This step creates the necessary catalog sources, dependent on whether the entitled registry or a private registry is used. For the entitled registry, it creates the catalog source directly using a YAML template; when using a private registry, the `}<inlineCode parentName=\"p\">{`cloudctl case`}</inlineCode>{` command is used for the control plane and every cartridge to install the catalog sources and their dependencies.`}</p>\n    <h3>{`Get OpenShift storage classes`}</h3>\n    <p>{`Most custom resources defined by the cartridge operators require some back-end storage. To be able to reference the correct OpenShift storage classes, they are retrieved based on the `}<inlineCode parentName=\"p\">{`openshift_storage_name`}</inlineCode>{` property of the Cloud Pak object.`}</p>\n    <h3>{`Prepare the Cloud Pak for Data operator`}</h3>\n    <p>{`When using express install, the Cloud Pak for Data operator also installs the Cloud Pak Foundational Services. Consecutively, this part of the deployer:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Creates the `}<inlineCode parentName=\"li\">{`ibm-common-services`}</inlineCode>{` project if it doesnâ€™t exist already`}</li>\n      <li parentName=\"ul\">{`Creates an OperatorGroup`}</li>\n      <li parentName=\"ul\">{`Creates the platform operator subscription`}</li>\n      <li parentName=\"ul\">{`Waits until the ClusterServerVersion objects for the platform operator and Operand Deployment Lifecycle Manager have been created`}</li>\n    </ul>\n    <h3>{`Install the Cloud Pak for Data control plane`}</h3>\n    <p>{`When the Cloud Pak for Data operator has been installed, the process continues by creating an OperandRequest object for the platform operator which manages the project in the which Cloud Pak for Data instance is installed. Then it creates an Ibmcpd custom resource in the project which installs the controle plane with nginx the metastore, etc.`}</p>\n    <p>{`The Cloud Pak for Data control plane is a pre-requisite for all cartridges so at this stage, the deployer waits until the Ibmcpd status reached the `}<inlineCode parentName=\"p\">{`Completed`}</inlineCode>{` state.`}</p>\n    <p>{`Once the control plane has been installed successfully, the deployer generates a new strong 25-character password for the Cloud Pak for Data `}<inlineCode parentName=\"p\">{`admin`}</inlineCode>{` user and stores this into the vault. Additionally, the `}<inlineCode parentName=\"p\">{`admin-user-details`}</inlineCode>{` secret in the OpenShift project is updated with the new password.`}</p>\n    <h3>{`Install the license service`}</h3>\n    <p>{`If the `}<inlineCode parentName=\"p\">{`cpfs`}</inlineCode>{` cartridge specifies `}<inlineCode parentName=\"p\">{`license_service`}</inlineCode>{` and the `}<inlineCode parentName=\"p\">{`state`}</inlineCode>{` attribute is `}<inlineCode parentName=\"p\">{`enabled`}</inlineCode>{`, the OperandRequest for the license service is created in OpenShift project `}<inlineCode parentName=\"p\">{`ibm-common-services`}</inlineCode>{`. This automatically takes care of installing the operator and an instance of `}<inlineCode parentName=\"p\">{`IBMLicensing`}</inlineCode>{` and set the number of threads per core (default 1). The value of `}<inlineCode parentName=\"p\">{`threads_per_core`}</inlineCode>{` is applied to the `}<inlineCode parentName=\"p\">{`IBMLicensing`}</inlineCode>{` instance once it has been created by the operator.`}</p>\n    <h3>{`Install the specified Cloud Pak for Data cartridges`}</h3>\n    <p>{`Now that the control plane has been installed in the specified OpenShift project, cartridges can be installed. Every cartridge is controlled by its own operator subscription in the `}<inlineCode parentName=\"p\">{`ibm-common-services`}</inlineCode>{` project and a custom resource. The deployer iterates twice over the specified cartridges, first to create the operator subscriptions, then to create the custom resources.`}</p>\n    <h4>{`Create cartridge operator subscriptions`}</h4>\n    <p>{`This steps creates `}<inlineCode parentName=\"p\">{`subscription`}</inlineCode>{` objects for each cartridge in the `}<inlineCode parentName=\"p\">{`ibm-common-services`}</inlineCode>{` project, using a YAML template that is included in the deployer code and the `}<inlineCode parentName=\"p\">{`subscription_channel`}</inlineCode>{` specified in the cartridge definition. Keeping the subscription channel separate delivers flexibility when new subscription channels become available over time.`}</p>\n    <p>{`Once the subscription has been created, the deployer waits for the associate CSV(s) to be created and reach the `}<inlineCode parentName=\"p\">{`Installed`}</inlineCode>{` state.`}</p>\n    <h4>{`Delete obsolete cartridges`}</h4>\n    <p>{`If this is not the first installation, earlier configured cartridges may have been removed. This steps iterates over all supported cartridges and checks if the cartridge has been installed and wheter it exists in the configuration of the current `}<inlineCode parentName=\"p\">{`cp4d`}</inlineCode>{` object. If the cartridge is no longer defined, its custom resource is removed; the operator will then take care of removing all OpenShift configuration.`}</p>\n    <h4>{`Install the cartridges`}</h4>\n    <p>{`This steps creates the Custom Resources for each cartridge. This is the actual installation of the cartridge. Cartridges can be installed in parallel to a certain extent and the operator will wait for the dependencies to be installed first before starting the processes. For example, if Watson Studio and Watson Machine Learning are installed, both have a dependency on the Common Core Services (CCS) and will wait for the CCS object to reach the Completed state before proceeding with the install. Once that is the case, both WS and WML will run the installation process in parallel.`}</p>\n    <h3>{`Wait until all cartridges are ready`}</h3>\n    <p>{`Installation of the cartridges can take a very long time; up to 5 hours for Watson Knowledge Catalog. While cartridges are being installed, the deployer checks the states of all cartridges on a regular basis and reports these in a log file. The deployer will retry until all specified cartridges have reached the `}<inlineCode parentName=\"p\">{`Completed`}</inlineCode>{` state.`}</p>\n    <h3>{`Configure LDAP authentication for Cloud Pak for Data`}</h3>\n    <p>{`If LDAP has been configured for the Cloud Pak for Data element, it will be configured after all cartridges have finished installing.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}