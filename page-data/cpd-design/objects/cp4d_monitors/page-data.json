{"componentChunkName":"component---src-pages-cpd-design-objects-cp-4-d-monitors-mdx","path":"/cpd-design/objects/cp4d_monitors/","result":{"pageContext":{"frontmatter":{"title":"Cloud Pak for Data Monitor configuration"},"relativePagePath":"/cpd-design/objects/cp4d_monitors.mdx","titleType":"page","MdxNode":{"id":"843f820a-8192-5ba1-a791-ab0b5eda935c","children":[],"parent":"ea56c42c-b03c-5f94-9ecb-2962677f45b5","internal":{"content":"---\ntitle: Cloud Pak for Data Monitor configuration\n---\n\nWith the Cloud Pak Deployer capability monitors can be deployed which uses the Cloud Pak for Data zen-watchdog monitor framework. \nThis allows adding custom monitors to the zen-watchdog framework, making these custom monitors visible in the Cloud Pak for Data metrics.\n\n![Cloud Pak for Data Monitors Overview](cp4d_monitors.png \"Cloud Pak for Data Monitors Overview\")\n\nUsing the Cloud Pak Deployer cp4d_monitors capability implements the following:\n- Enable OpenShift Cluster monitoring\n- Create Cloud Pak for Data ServiceMonitor endpoint to forward zen-watchdog monitor events to OpenShift Cluster monitoring\n- Create source repository auth secrets (optional, if pulling monitors from secure repo)\n- Create target container registry auth secrets (optional, if pushing monitor images to secure container registry)\n- Deploy custom monitors, which will be added to the zen-watchdog monitor framework\n\n\nEach `cp4d_monitors` entry contains a set of default settings, which are applicable to the `monitors` list. These defaults can be overwritten per monitor if needed.\n\n| Property | Description                                                          | Mandatory | Allowed values |\n| -------- | -------------------------------------------------------------------- | --------- | -------------- |\n| name  | The name of the monitor set    | Yes       | lowercase RFC 1123 subdomain (1)  |\n| cp4d_instance | The OpenShift project (namespace) on which the Cloud Pak for Data instance resides  | Yes       |  |\n| openshift_cluster_name | The Openshift cluster name | Yes |  |\n| default_monitor_source_repo | The default repository location of all monitors located in the `monitors` section | No |  |\n| default_monitor_source_token_secret | The default repo access token secret name, must be available in the vault | No |  |\n| default_monitor_target_cr |   The default target container registry (cr) for the monitor image to be pushed. When omitted, the OpenShift internal registry is used | No |  |\n| default_monitor_target_cr_user_secret | The default target container registry user name secret name used to push the monitor image. Must be available in the vault | No |  |\n| default_monitor_target_cr_password_secret | The default target container registry password secret name used to push the monitor image. Must be available in the vault | No |  |\n| monitors | List of monitors | Yes |  |\n\nPer `monitors` entry, the following settings are specified:\n\n| Property | Description                                                          | Mandatory | Allowed values |\n| -------- | -------------------------------------------------------------------- | --------- | -------------- |\n| name  | The name of the monitor entry     | Yes       | lowercase RFC 1123 subdomain (1)   |\n| monitor_source_repo | Overrides default_monitor_source_repo for this single monitor | No | | \n| monitor_source_token_secret | Overrides default_monitor_source_token_secret for this single monitor | No | | \n| monitor_target_cr | Overrides default_monitor_target_cr for this single monitor | No | | \n| monitor_target_cr_user_secret | Overrides default_monitor_target_cr_user_secret for this single monitor | No | | \n| monitor_target_cr_user_password | Overrides default_monitor_target_cr_user_password for this single monitor | No | | \n| context | Sets the context of the monitor the the source repo (sub folder name) | Yes | | \n| label | Set the label of the pushed image, default to 'latest' | No | | \n| schedule | Sets the schedule of the generated Cloud Pak for Data monitor cronjob | No | | \n| event_types | List of monitor event types | Yes | | \n\nEach monitors entry must have at least 1 event_types entry specified:\n\n| Property | Description                                                          | Mandatory | Allowed values |\n| -------- | -------------------------------------------------------------------- | --------- | -------------- |\n| name  | The name of the monitor entry     | Yes       | lowercase RFC 1123 subdomain (1)   |\n| simple_name  | Simple name of the event type     | Yes |    |\n| alert_type  | Alert type of the event type     | Yes | platform  |\n| short_description  | Short description of the event type     | Yes |    |\n| long_description  | Long description of the monitor. The `item` must be available in the metadata of the monitor response    | Yes |    |\n| resolution  | Short description of proposed solution  | Yes       |    |\n| reason_code_prefix  | Used for SNMP alerts, custom prefixes should be greater than 60  | Yes  |    |\n\n(1) Must consist of lower case alphanumeric characters, `-` or `.`, and must start and end with an alphanumeric character (e.g. `example.com`, regex used for validation is `[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*`)\n\n\nFile: config/cp4d_monitors.yaml\n\n```\n---\n# List of cp4d_monitors\ncp4d_monitors:\n- name: cp4d-monitor-set-1\n  cp4d_instance: zen-40\n  openshift_cluster_name: {{ env_id }}\n  default_monitor_source_repo: https://github.com/IBM/cloud-pak-deployer-monitors\n  default_monitor_source_token_secret: monitors_source_repo_secret\n  default_monitor_target_cr: de.icr.io/monitorrepo  \n  default_monitor_target_cr_user_secret: monitors_target_cr_username\n  default_monitor_target_cr_password_secret: monitors_target_cr_password\n  # List of monitors\n  monitors:\n  - name: helloworld\n    #monitor_source_repo:             \n    #monitor_source_token_secret:    \n    #monitor_target_cr:              \n    #monitor_target_cr_user_secret:  \n    #monitor_target_cr_user_password:\n    context: helloworld\n    label: latest\n    schedule: \"*/2 * * * *\"\n    event_types:\n    - name: \"hello_world_status\"\n      simple_name: \"Hello World example\"\n      alert_type: \"platform\"\n      short_description: \"A custom HelloWorld monitor\"\n      long_description: \"HelloWorld: <Available>\"\n      resolution: \"none\"\n      reason_code_prefix: \"70\"\n```","type":"Mdx","contentDigest":"ff417595f5be4cb87a414283d5dbc2bc","owner":"gatsby-plugin-mdx","counter":220},"frontmatter":{"title":"Cloud Pak for Data Monitor configuration"},"exports":{},"rawBody":"---\ntitle: Cloud Pak for Data Monitor configuration\n---\n\nWith the Cloud Pak Deployer capability monitors can be deployed which uses the Cloud Pak for Data zen-watchdog monitor framework. \nThis allows adding custom monitors to the zen-watchdog framework, making these custom monitors visible in the Cloud Pak for Data metrics.\n\n![Cloud Pak for Data Monitors Overview](cp4d_monitors.png \"Cloud Pak for Data Monitors Overview\")\n\nUsing the Cloud Pak Deployer cp4d_monitors capability implements the following:\n- Enable OpenShift Cluster monitoring\n- Create Cloud Pak for Data ServiceMonitor endpoint to forward zen-watchdog monitor events to OpenShift Cluster monitoring\n- Create source repository auth secrets (optional, if pulling monitors from secure repo)\n- Create target container registry auth secrets (optional, if pushing monitor images to secure container registry)\n- Deploy custom monitors, which will be added to the zen-watchdog monitor framework\n\n\nEach `cp4d_monitors` entry contains a set of default settings, which are applicable to the `monitors` list. These defaults can be overwritten per monitor if needed.\n\n| Property | Description                                                          | Mandatory | Allowed values |\n| -------- | -------------------------------------------------------------------- | --------- | -------------- |\n| name  | The name of the monitor set    | Yes       | lowercase RFC 1123 subdomain (1)  |\n| cp4d_instance | The OpenShift project (namespace) on which the Cloud Pak for Data instance resides  | Yes       |  |\n| openshift_cluster_name | The Openshift cluster name | Yes |  |\n| default_monitor_source_repo | The default repository location of all monitors located in the `monitors` section | No |  |\n| default_monitor_source_token_secret | The default repo access token secret name, must be available in the vault | No |  |\n| default_monitor_target_cr |   The default target container registry (cr) for the monitor image to be pushed. When omitted, the OpenShift internal registry is used | No |  |\n| default_monitor_target_cr_user_secret | The default target container registry user name secret name used to push the monitor image. Must be available in the vault | No |  |\n| default_monitor_target_cr_password_secret | The default target container registry password secret name used to push the monitor image. Must be available in the vault | No |  |\n| monitors | List of monitors | Yes |  |\n\nPer `monitors` entry, the following settings are specified:\n\n| Property | Description                                                          | Mandatory | Allowed values |\n| -------- | -------------------------------------------------------------------- | --------- | -------------- |\n| name  | The name of the monitor entry     | Yes       | lowercase RFC 1123 subdomain (1)   |\n| monitor_source_repo | Overrides default_monitor_source_repo for this single monitor | No | | \n| monitor_source_token_secret | Overrides default_monitor_source_token_secret for this single monitor | No | | \n| monitor_target_cr | Overrides default_monitor_target_cr for this single monitor | No | | \n| monitor_target_cr_user_secret | Overrides default_monitor_target_cr_user_secret for this single monitor | No | | \n| monitor_target_cr_user_password | Overrides default_monitor_target_cr_user_password for this single monitor | No | | \n| context | Sets the context of the monitor the the source repo (sub folder name) | Yes | | \n| label | Set the label of the pushed image, default to 'latest' | No | | \n| schedule | Sets the schedule of the generated Cloud Pak for Data monitor cronjob | No | | \n| event_types | List of monitor event types | Yes | | \n\nEach monitors entry must have at least 1 event_types entry specified:\n\n| Property | Description                                                          | Mandatory | Allowed values |\n| -------- | -------------------------------------------------------------------- | --------- | -------------- |\n| name  | The name of the monitor entry     | Yes       | lowercase RFC 1123 subdomain (1)   |\n| simple_name  | Simple name of the event type     | Yes |    |\n| alert_type  | Alert type of the event type     | Yes | platform  |\n| short_description  | Short description of the event type     | Yes |    |\n| long_description  | Long description of the monitor. The `item` must be available in the metadata of the monitor response    | Yes |    |\n| resolution  | Short description of proposed solution  | Yes       |    |\n| reason_code_prefix  | Used for SNMP alerts, custom prefixes should be greater than 60  | Yes  |    |\n\n(1) Must consist of lower case alphanumeric characters, `-` or `.`, and must start and end with an alphanumeric character (e.g. `example.com`, regex used for validation is `[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*`)\n\n\nFile: config/cp4d_monitors.yaml\n\n```\n---\n# List of cp4d_monitors\ncp4d_monitors:\n- name: cp4d-monitor-set-1\n  cp4d_instance: zen-40\n  openshift_cluster_name: {{ env_id }}\n  default_monitor_source_repo: https://github.com/IBM/cloud-pak-deployer-monitors\n  default_monitor_source_token_secret: monitors_source_repo_secret\n  default_monitor_target_cr: de.icr.io/monitorrepo  \n  default_monitor_target_cr_user_secret: monitors_target_cr_username\n  default_monitor_target_cr_password_secret: monitors_target_cr_password\n  # List of monitors\n  monitors:\n  - name: helloworld\n    #monitor_source_repo:             \n    #monitor_source_token_secret:    \n    #monitor_target_cr:              \n    #monitor_target_cr_user_secret:  \n    #monitor_target_cr_user_password:\n    context: helloworld\n    label: latest\n    schedule: \"*/2 * * * *\"\n    event_types:\n    - name: \"hello_world_status\"\n      simple_name: \"Hello World example\"\n      alert_type: \"platform\"\n      short_description: \"A custom HelloWorld monitor\"\n      long_description: \"HelloWorld: <Available>\"\n      resolution: \"none\"\n      reason_code_prefix: \"70\"\n```","fileAbsolutePath":"/home/runner/work/cloud-pak-deployer/cloud-pak-deployer/doc/src/pages/cpd-design/objects/cp4d_monitors.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}