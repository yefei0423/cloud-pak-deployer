{"componentChunkName":"component---src-pages-cpd-design-components-logging-auditing-index-mdx","path":"/cpd-design/components/logging-auditing/","result":{"pageContext":{"frontmatter":{"title":"Logging and auditing"},"relativePagePath":"/cpd-design/components/logging-auditing/index.mdx","titleType":"page","MdxNode":{"id":"cb1a1edf-ba3a-528b-8338-8689e338e1c4","children":[],"parent":"36fc1569-c7cf-522b-8bd3-2e74d66670b2","internal":{"content":"---\ntitle: Logging and auditing\n---\n\n# Logging and auditing for Cloud Paks\n\nFor logging and auditing of Cloud Pak for Data we make use of the OpenShift logging framework, which delivers a lot of flexibility in capturing logs from applications, storing them in an ElasticSearch datastore in the cluster (currently not supported by the deployer), or forwarding the log entries to external log collectors such as an ElasticSearch, Fluentd, Loki and others.\n\n![Logging overview](cloud-pak-deployer-logging.png)\n\nOpenShift logging captures 3 types of logging entries from workload that is running on the cluster:\n* infrastructure - logs generated by OpenShift processes\n* audit - audit logs generated by applications as well as OpenShift\n* application - all other applications on the cluster\n\nWhen OpenShift logging is activated via the `openshift_logging` object, all 3 logging types are activated automatically. You can specify `logging_output` items to forward log records to the log collector of your choice. In the below example, the application logs are forwarded to a loki server `https://loki-application.sample.com` and audit logs to `https://loki-audit.sample.com`, both have the same certificate to connect with:\n\n```\nopenshift_logging:\n- openshift_cluster_name: pluto-01\n  logging_output:\n  - name: loki-application\n    type: loki\n    url: https://loki-application.sample.com\n    certificates:\n      cert: pluto-01-loki-cert\n      key: pluto-01-loki-key\n      ca: pluto-01-loki-ca\n  - name: loki-audit\n    type: loki\n    url: https://loki-audit.sample.com\n    certificates:\n      cert: pluto-01-loki-cert\n      key: pluto-01-loki-key\n      ca: pluto-01-loki-ca\n```\n\nCloud Pak for Data and Foundational Services application logs are automatically picked up and forwarded to the `loki-application` logging destination and no additional configuration is needed.\n\nIf you also want to activate audit logging for Cloud Pak for Data, you can do this by adding a `cp4d_audit_config` object to your configuration. With the below example, the Cloud Pak for Data audit logger is configured to write log records to the standard output (`stdout`) of the pods, after which they are forwarded to the `loki-audit` logging destination by a `ClusterLogForwarder` custom resource.\n\n```\ncp4d_audit_config:\n- project: zen-40\n  audit_replicas: 2\n  audit_output:\n  - type: openshift-logging\n    logging_name: loki-audit\n```\n\n<InlineNotification kind=\"info\">\nBecause audit log entries are written to the standard output, they will also be picked up by the generic application log forwarder and will therefore also appear in the application logging destination.\n</InlineNotification>","type":"Mdx","contentDigest":"823a791141990743d1d9dd4ac2d344fd","owner":"gatsby-plugin-mdx","counter":245},"frontmatter":{"title":"Logging and auditing"},"exports":{},"rawBody":"---\ntitle: Logging and auditing\n---\n\n# Logging and auditing for Cloud Paks\n\nFor logging and auditing of Cloud Pak for Data we make use of the OpenShift logging framework, which delivers a lot of flexibility in capturing logs from applications, storing them in an ElasticSearch datastore in the cluster (currently not supported by the deployer), or forwarding the log entries to external log collectors such as an ElasticSearch, Fluentd, Loki and others.\n\n![Logging overview](cloud-pak-deployer-logging.png)\n\nOpenShift logging captures 3 types of logging entries from workload that is running on the cluster:\n* infrastructure - logs generated by OpenShift processes\n* audit - audit logs generated by applications as well as OpenShift\n* application - all other applications on the cluster\n\nWhen OpenShift logging is activated via the `openshift_logging` object, all 3 logging types are activated automatically. You can specify `logging_output` items to forward log records to the log collector of your choice. In the below example, the application logs are forwarded to a loki server `https://loki-application.sample.com` and audit logs to `https://loki-audit.sample.com`, both have the same certificate to connect with:\n\n```\nopenshift_logging:\n- openshift_cluster_name: pluto-01\n  logging_output:\n  - name: loki-application\n    type: loki\n    url: https://loki-application.sample.com\n    certificates:\n      cert: pluto-01-loki-cert\n      key: pluto-01-loki-key\n      ca: pluto-01-loki-ca\n  - name: loki-audit\n    type: loki\n    url: https://loki-audit.sample.com\n    certificates:\n      cert: pluto-01-loki-cert\n      key: pluto-01-loki-key\n      ca: pluto-01-loki-ca\n```\n\nCloud Pak for Data and Foundational Services application logs are automatically picked up and forwarded to the `loki-application` logging destination and no additional configuration is needed.\n\nIf you also want to activate audit logging for Cloud Pak for Data, you can do this by adding a `cp4d_audit_config` object to your configuration. With the below example, the Cloud Pak for Data audit logger is configured to write log records to the standard output (`stdout`) of the pods, after which they are forwarded to the `loki-audit` logging destination by a `ClusterLogForwarder` custom resource.\n\n```\ncp4d_audit_config:\n- project: zen-40\n  audit_replicas: 2\n  audit_output:\n  - type: openshift-logging\n    logging_name: loki-audit\n```\n\n<InlineNotification kind=\"info\">\nBecause audit log entries are written to the standard output, they will also be picked up by the generic application log forwarder and will therefore also appear in the application logging destination.\n</InlineNotification>","fileAbsolutePath":"/home/runner/work/cloud-pak-deployer/cloud-pak-deployer/doc/src/pages/cpd-design/components/logging-auditing/index.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}